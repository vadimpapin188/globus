<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ì–ª–æ–±—É—Å - –ü–æ–∏—Å–∫ –∏ –Ω–µ —Ç–æ–ª—å–∫–æ!</title>
  <link rel="icon" href="favicon.png.png" type="image/png">
  <style>
  /* ... —Ç–≤–æ–∏ —Å—Ç–∞—Ä—ã–µ —Å—Ç–∏–ª–∏ ... */

  .recommended-section {
    margin-bottom: 30px;
  }

  .recommended-section h2 {
    font-size: 1.2rem;
    color: var(--primary-color);
    margin-bottom: 15px;
  }

  .sites-grid {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
  }

  .site-card {
    background: rgba(255, 255, 255, 0.1);
    padding: 12px 20px;
    border-radius: 8px;
    text-decoration: none;
    color: white;
    font-weight: bold;
    border: 1px solid rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .site-card:hover {
    background: var(--primary-color);
    color: #051937;
    transform: translateY(-2px);
  }
</style>

<div class="content-area" id="content-area">
  <div class="top-bar">
    <div class="brand-section"><h1>–ì–ª–æ–±—É—Å</h1></div>
    <div class="search-section">
      <input id="search-input" type="text" placeholder="...–∏ –ø–æ –≥–∞–ª–∞–∫—Ç–∏–∫–µ –Ω–∞–π–¥—ë–º!">
      <button id="search-button">–ù–∞–π—Ç–∏</button>
    </div>
  </div>

  <main id="main">
    <section class="recommended-section">
      <h2>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Å–∞–π—Ç—ã</h2>
      <div class="sites-grid">
        <a href="https://google.com" target="_blank" class="site-card">
          <span>üîç</span> Google
        </a>
        <a href="https://bing.com" target="_blank" class="site-card">
          <span>üåê</span> Bing
        </a>
        <a href="https://ya.ru" target="_blank" class="site-card">
          <span>–Ø</span> –Ø–Ω–¥–µ–∫—Å
        </a>
      </div>
    </section>

    <p>–ù–∞–π–¥—ë–º –ø–æ –≤—Å–µ–π –∑–µ–º–ª–µ –∏ –∑–∞ –µ—ë –ø—Ä–µ–¥–µ–ª–∞–º–∏!</p>
  </main>
  
  <footer>¬© –ì–ª–æ–±—É—Å. 2025.</footer>
</div>
  <script>
    const input = document.getElementById('search-input');
    const button = document.getElementById('search-button');
    const mainArea = document.getElementById('main');
    const sidebar = document.getElementById('sidebar');
    const toggleButton = document.getElementById('menu-toggle');
    const contentArea = document.getElementById('content-area');

    const aiTriggers = ["–∫–∞–∫", "—á—Ç–æ", "–ø–æ—á–µ–º—É", "–∑–∞—á–µ–º", "–∫—Ç–æ", "–≥–¥–µ", "–∫–æ–≥–¥–∞", "–∫–∞–∫–æ–π"];

    function createSnow() {
        const snowflake = document.createElement('div');
        snowflake.classList.add('snowflake');
        snowflake.innerHTML = '‚ùÑ';
        snowflake.style.left = Math.random() * 100 + 'vw';
        snowflake.style.animationDuration = Math.random() * 3 + 7 + 's';
        snowflake.style.opacity = Math.random();
        document.body.appendChild(snowflake);
        setTimeout(() => { snowflake.remove(); }, 10000);
    }
    setInterval(createSnow, 400);

    async function fixOrtho(query) {
        try {
            const response = await fetch(`https://speller.yandex.net/services/spellservice.json/checkText?text=${encodeURIComponent(query)}`);
            const data = await response.json();
            let correctedQuery = query;
            for (let i = data.length - 1; i >= 0; i--) {
                const error = data[i];
                if (error.s && error.s.length > 0) {
                    correctedQuery = correctedQuery.substring(0, error.pos) + error.s[0] + correctedQuery.substring(error.pos + error.len);
                }
            }
            return correctedQuery;
        } catch (e) { return query; }
    }

    async function askAI(question) {
        mainArea.innerHTML = "<h2>–í–∞–º —á–∞–π —Å —Å–∞—Ö–∞—Ä–æ–º? –ò–ª–∏ —Å –º–æ–∏–º–∏ —Å–ª–µ–∑–∞–º–∏...</h2><p>–ü—Ä–∏–Ω–æ—Å–∏–º –∏–∑–≤–∏–Ω–µ–Ω–∏—è, –Ω–æ —Å–µ—Ä–≤–∏—Å –ì–ª–æ–±—É—Å –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –±–æ–ª—å—à–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.</p>";
        try {
            const aiResponse = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    "model": "mistralai/mistral-7b-instruct:free",
                    "messages": [
                        {"role": "system", "content": ""},
                        {"role": "user", "content": question}
                    ]
                })
            });
            const data = await aiResponse.json();
            const aiAnswer = data.choices[0].message.content;
            mainArea.innerHTML = `<h2></h2><div class="ai-answer-box">${aiAnswer.trim().replace(/\n/g, '<br>')}</div>`;
        } catch (error) {
            mainArea.innerHTML = `<h2>–û—à–∏–±–∫–∞</h2><button class="shop-btn dm" onclick="window.location.href='https://www.google.com/search?q=${question}'">–°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.</button>`;
        }
    }

    async function search() {
    let rawQuery = input.value.trim();
    if (!rawQuery) return alert('–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å!');
    
    button.disabled = true;
    button.textContent = '...';
    
    // 1. –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏—é
    let finalQuery = await fixOrtho(rawQuery);
    
    // 2. –ü–µ—Ä–µ–≤–æ–¥ –≤ –Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä
    finalQuery = finalQuery.toLowerCase();
    
    // 3. –£–¥–∞–ª–µ–Ω–∏–µ –∑–Ω–∞–∫–æ–≤ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è (–æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ –ø—Ä–æ–±–µ–ª—ã)
    // –≠—Ç–æ —É–±–µ—Ä–µ—Ç ?, !, ., ,, :, ; –∏ –ø—Ä–æ—á–∏–µ —Å–∏–º–≤–æ–ª—ã
    finalQuery = finalQuery.replace(/[^\w\s–∞-—è—ë0-9]/gi, '');
    
    input.value = finalQuery;
    
    let firstWord = finalQuery.split(' ')[0];

    if (aiTriggers.includes(firstWord)) {
        await askAI(finalQuery);
    } else if (finalQuery.includes("–æ–¥–µ–∂–¥–∞")) {
        mainArea.innerHTML = `<h2>–ì–ª–æ–±—É—Å –ú–∞—Ä–∫–µ—Ç</h2><button class="shop-btn wb" onclick="window.location.href='https://www.wildberries.ru/catalog/0/search.aspx?search=${finalQuery}'">Wildberries</button><button class="shop-btn dm" onclick="window.location.href='https://www.detmir.ru/search/results/?qt=${finalQuery}'">–î–µ—Ç—Å–∫–∏–π –ú–∏—Ä</button>`;
    } else {
        // 4. –ó–∞–º–µ–Ω–∞ –ø—Ä–æ–±–µ–ª–æ–≤ –Ω–∞ –¥–µ—Ñ–∏—Å—ã –¥–ª—è URL
        let slugQuery = finalQuery.replace(/\s+/g, '-');
        window.location.href = 'https://sites.google.com/view/globushomett/' + encodeURIComponent(slugQuery);
    }
    
    button.disabled = false;
    button.textContent = '–ù–∞–π—Ç–∏';
}

    button.addEventListener('click', search);
    input.addEventListener('keydown', (e) => { if (e.key === 'Enter') search(); });
    toggleButton.addEventListener('click', () => {
        const isCollapsed = sidebar.classList.toggle('collapsed');
        contentArea.classList.toggle('shifted', isCollapsed);
        toggleButton.textContent = isCollapsed ? '¬ª' : '¬´';
    });
  </script>
</body>
</html>



