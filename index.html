<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-site-verification" content="6j8jsJHuf1wb0ss06CUSkohPVM_p5DK02UgROLuRJtU" />
  <title>Глобус</title>
  <link rel="icon" href="favicon.png.png" type="image/png">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit" async defer></script>

  <style>
    /* ---------------------------------------------------------------------- */
    /* --- СТИЛИ CSS (ВСЕ НИЖЕ) --- */
    /* ---------------------------------------------------------------------- */

    /* --- ГЛОБАЛЬНЫЕ СТИЛИ И ЦВЕТА --- */
    :root {
      --color-primary: #00796B; /* Темно-бирюзовый/зеленый (Акцент) */
      --color-primary-dark: #004D40; /* Темный акцент (Ховер) */
      --color-background: #f0f4f8; /* Светлый фон */
      --color-sidebar-bg: #2c3e50; /* Темный фон сайдбара */
      --color-text-dark: #333333; /* Основной текст */
      --color-text-light: #ffffff; /* Текст на темном фоне */
      --sidebar-width: 240px;
      --sidebar-collapsed-width: 60px;
      --transition-duration: 0.3s;
      --shadow-light: 0 4px 10px rgba(0,0,0,0.1);
    }

    body {
      margin: 0;
      font-family: 'Roboto', Arial, sans-serif;
      background-color: var(--color-background);
      color: var(--color-text-dark);
      display: flex;
      min-height: 100vh;
      transition: margin-left var(--transition-duration) ease;
    }

    /* Контейнер для управления расположением меню и основного контента */
    .container {
        display: flex;
        flex-grow: 1;
        flex-direction: column;
    }

    /* --- СТИЛИ МЕНЮ (САЙДБАР) --- */
    nav.sidebar {
      width: var(--sidebar-width);
      background-color: var(--color-sidebar-bg);
      padding-top: 50px; /* Увеличил отступ сверху */
      color: var(--color-text-light);
      box-shadow: 2px 0 5px rgba(0,0,0,0.3);
      position: fixed;
      height: 100%;
      z-index: 100;
      transition: all var(--transition-duration) ease;
      transform: translateX(0);
    }

    /* Стиль для СВЕРНУТОГО меню */
    nav.sidebar.collapsed {
      width: var(--sidebar-collapsed-width);
    }

    nav.sidebar ul {
      list-style-type: none;
      padding: 0;
      margin: 0;
    }

    nav.sidebar ul li a {
      color: var(--color-text-light);
      padding: 15px 15px; /* Увеличенный отступ */
      display: flex; /* Для выравнивания текста */
      align-items: center;
      text-decoration: none;
      transition: background-color var(--transition-duration) ease, color var(--transition-duration) ease;
      white-space: nowrap;
      overflow: hidden;
      font-weight: 300;
    }

    nav.sidebar ul li a:hover {
      background-color: var(--color-primary); /* Акцентный цвет при наведении */
      color: var(--color-text-light);
    }

    nav.sidebar.collapsed ul li a {
      padding: 15px 0;
      justify-content: center; /* Центрируем иконку/текст */
    }

    /* Скрываем текст в свернутом состоянии (если бы были иконки) */
    nav.sidebar.collapsed ul li a span {
      display: none;
    }

    /* Кнопка переключения меню */
    #menu-toggle {
      position: absolute;
      top: 15px;
      right: -15px; /* Выносим кнопку за пределы сайдбара */
      background-color: var(--color-primary);
      color: var(--color-text-light);
      border: none;
      padding: 5px 10px;
      cursor: pointer;
      border-radius: 4px; /* Мягкие углы */
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      transition: background-color var(--transition-duration) ease;
      z-index: 101;
      font-size: 20px;
      line-height: 1;
    }

    #menu-toggle:hover {
      background-color: var(--color-primary-dark);
    }

    /* --- ОСНОВНОЙ КОНТЕНТ И ХЕДЕР --- */
    header {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      padding: 15px 30px;
      background-color: var(--color-text-light); /* Белый фон хедера */
      box-shadow: var(--shadow-light); /* Легкая тень */
      margin-left: var(--sidebar-width); /* Изначальный сдвиг */
      transition: margin-left var(--transition-duration) ease;
      position: sticky; /* Закрепляем хедер */
      top: 0;
      z-index: 50;
    }

    /* Сдвиг хедера при СВЕРНУТОМ меню */
    header.shifted {
      margin-left: var(--sidebar-collapsed-width);
    }

    /* ОБНОВЛЕНО: Используем flex-direction column для контейнера, чтобы CAPTCHA/Turnstile были под поисковой строкой */
    header > div {
      display: flex;
      flex-direction: column;
      align-items: flex-end; /* Выравнивание по правому краю */
      width: 400px;
      max-width: 100%;
    }

    #search-container {
      display: flex;
      gap: 10px;
      width: 100%;
    }
    
    /* ДОБАВЛЕНО: Стили для контейнера CAPTCHA */
    #captcha-wrapper {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 15px; /* Отступ сверху для CAPTCHA */
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background-color: #ffffff;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    #captcha-wrapper label {
      font-size: 16px;
      font-weight: 400;
      color: var(--color-primary-dark);
    }
    
    #captcha-input {
      width: 80px;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      transition: border-color var(--transition-duration) ease;
    }
    
    #captcha-input:focus {
      border-color: var(--color-primary);
      outline: none;
    }

    #search-input {
      flex-grow: 1;
      padding: 10px 15px;
      font-size: 16px;
      border: 1px solid #ddd;
      border-radius: 20px; /* Скругленные углы */
      color: var(--color-text-dark);
      transition: border-color var(--transition-duration) ease;
    }

    #search-input:focus {
      border-color: var(--color-primary);
      outline: none;
    }

    #search-button {
      background-color: var(--color-primary);
      border: none;
      color: var(--color-text-light);
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 20px; /* Скругленные углы */
      cursor: pointer;
      transition: background-color var(--transition-duration) ease;
      font-weight: 400;
    }

    #search-button:hover {
      background-color: var(--color-primary-dark);
    }

    main {
      max-width: 900px;
      margin: 80px auto 100px auto; /* Увеличенный отступ */
      text-align: center;
      margin-left: calc(var(--sidebar-width) + 60px); /* Изначальный отступ */
      transition: margin-left var(--transition-duration) ease;
      padding: 0 20px;
    }

    /* Сдвиг main при СВЕРНУТОМ меню */
    main.shifted {
      margin-left: calc(var(--sidebar-collapsed-width) + 60px);
    }

    h1 {
      font-weight: 300;
      font-size: 60px; /* Немного уменьшил для минимализма */
      margin-bottom: 20px;
      color: var(--color-primary);
      letter-spacing: 2px;
    }

    p {
      font-size: 20px;
      color: var(--color-text-dark);
      opacity: 0.7;
    }

    footer {
      margin-top: auto;
      text-align: center;
      color: var(--color-text-dark);
      padding: 20px 0;
      background-color: #e0e6ec; /* Светлый фон футера */
      border-top: 1px solid #ddd;
      margin-left: var(--sidebar-width);
      width: calc(100% - var(--sidebar-width));
      transition: all var(--transition-duration) ease;
    }

    /* Изменение футера при СВЕРНУТОМ меню */
    footer.shifted {
      margin-left: var(--sidebar-collapsed-width);
      width: calc(100% - var(--sidebar-collapsed-width));
    }
    
    /* Добавляем стили для иконок в меню (если их нет, это не повлияет) */
    nav.sidebar ul li a::before {
        /* Добавьте сюда иконки, используя Font Awesome или SVG */
        content: '\2022'; /* Используем простую точку как заглушку */
        margin-right: 10px;
        font-size: 1.2em;
    }
    
    /* Убираем маркер для главной страницы, чтобы выделить ее */
    nav.sidebar ul li:first-child a::before {
        content: '»'; 
    }

    /* ---------------------------------------------------------------------- */
    /* --- СТИЛИ CSS (ВСЕ ВЫШЕ) --- */
    /* ---------------------------------------------------------------------- */
  </style>
</head>
<body>

    <nav class="sidebar" id="sidebar">
    <button id="menu-toggle">«</button>
    <ul>
      <li><a href="https://vadimpapin188.github.io/globus/"><span>Главная</span></a></li>
      <li><a href="#"><span>О нас</span></a></li>
      <li><a href="#"><span>Контакты</span></a></li>
      <li><a href="https://sites.google.com/view/globushomett/"><span>Старая версия сайта</span></a></li>
    </ul>
  </nav>

    <div class="container">
    <header id="header">
            <div>
        <div id="search-container">
          <input id="search-input" type="text" placeholder="Введите запрос" />
          <button id="search-button">Найти</button>
        </div>
        
                <div id="captcha-wrapper">
          <label id="captcha-question">Проверка:</label>
          <input id="captcha-input" type="number" placeholder="Ваш ответ" />
        </div>
        
                <div id="cf-turnstile"
              class="cf-turnstile"
              data-sitekey="YOUR_CLOUDFLARE_SITE_KEY"
              data-callback="turnstileCallback"
              data-theme="light">
        </div>
      </div>
          </header>

    <main id="main">
      <h1>ГЛОБУС</h1>
      <p>Простой и быстрый поиск информации</p>
    </main>

    <footer id="footer">
      © Глобус. 2025. Проект является не коммерческим, а инди-проектом.
    </footer>
  </div>
  <script>
    const input = document.getElementById('search-input');
    const button = document.getElementById('search-button');
    const sidebar = document.getElementById('sidebar');
    const toggleButton = document.getElementById('menu-toggle');
    const header = document.getElementById('header');
    const main = document.getElementById('main');
    const footer = document.getElementById('footer');

    // ДОБАВЛЕНО: Элементы и переменные для CAPTCHA и Turnstile
    const captchaQuestion = document.getElementById('captcha-question');
    const captchaInput = document.getElementById('captcha-input');
    let captchaAnswer = 0;
    let turnstileToken = null;

    // --- ФУНКЦИИ CAPTCHA ---
    function generateCaptcha() {
      const num1 = Math.floor(Math.random() * 10) + 1;
      const num2 = Math.floor(Math.random() * 10) + 1;
      // Используем простое сложение для примера
      captchaAnswer = num1 + num2; 
      captchaQuestion.textContent = `Сколько будет ${num1} + ${num2}?`;
      captchaInput.value = ''; // Очистка ввода
    }
    
    function validateCaptcha() {
      return parseInt(captchaInput.value, 10) === captchaAnswer;
    }

    // --- ФУНКЦИИ TURNSTILE ---
    window.turnstileCallback = function(token) {
      turnstileToken = token;
      console.log('Turnstile Token:', turnstileToken);
    }

    // --- ФУНКЦИИ ПОИСКА (ОБНОВЛЕНО) ---
    function search() {
      const query = input.value.trim();
      if (!query) return alert('Введите запрос для поиска');

      // 1. Проверка CAPTCHA
      if (!validateCaptcha()) {
        alert('Неверный ответ на CAPTCHA. Попробуйте еще раз!');
        generateCaptcha(); // Генерируем новый вопрос
        return;
      }

      // 2. Проверка Cloudflare Turnstile (проверяем только наличие токена)
      if (!turnstileToken) {
        alert('Пожалуйста, пройдите проверку Cloudflare Turnstile.');
        // Если вы используете не implicit рендер, можете сбросить его тут:
        // turnstile.reset('#cf-turnstile'); 
        return;
      }

      // Если обе проверки пройдены:
      const url = 'https://sites.google.com/view/globushomett/' + encodeURIComponent(query);
      window.location.href = url;
      
      // Сброс после успешного поиска для следующего запроса
      generateCaptcha();
      turnstileToken = null; // Сброс токена
      // Сброс виджета Cloudflare
      if (typeof turnstile !== 'undefined') {
        turnstile.reset('#cf-turnstile');
      }
    }

    button.addEventListener('click', search);

    input.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        search();
      }
    });
    
    // Инициализация CAPTCHA при загрузке страницы
    generateCaptcha();

    // --- ФУНКЦИЯ СВОРАЧИВАНИЯ МЕНЮ ---
    toggleButton.addEventListener('click', () => {
      const isCollapsed = sidebar.classList.toggle('collapsed');
      header.classList.toggle('shifted', isCollapsed);
      main.classList.toggle('shifted', isCollapsed);
      footer.classList.toggle('shifted', isCollapsed);

      // Изменение текста кнопки: « (свернуть) или » (развернуть)
      toggleButton.textContent = isCollapsed ? '»' : '«';
    });
  </script>

</body>
</html>
